// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  first_name            String
  last_name             String
  mail                  String                @unique
 
  client                Client                []
  @@idClient([first_name, last_name, mail])
  
  admin                 Admin                 []
  @@idAdmin([first_name, last_name, mail])
} 

model Client {
  idClient              Int                   @id @default(autoincrement())
  numberClient          Int
  
  user                  User                  @relation(fields: [userFirst_name, userLast_name, userMail], references: [first_name, last_name, mail])
  userFirst_name        String
  userLast_name         String
  userMail              String
  account               Account               []
}

model Admin {
  idAdmin               Int                   @id @default(autoincrement())
  numberAdmin           Int

  user                  User                  @relation(fields: [userFirst_name, userLast_name, userMail], references: [first_name, last_name, mail])
  userFirst_name        String
  userLast_name         String
  userMail              String
}

model Account {
  idAccount             Int                   @id @default(autoincrement())
  numberAccount         Int
  balance               Int
  transactionHistory    TransactionHistory    []
  client                Client                @relation(fields: [clientId], references: [idClient])
  clientId              Int
}

model TransactionHistory {
  idTransactionHistory Int                   @id @default(autoincrement())
  date                DateTime      
  debitClient         Int       
  creditClient        Int
  account             Account                @relation(fields: [accountId], references: [idAccount])
  accountId           Int
}